# Linux - 기본 개념 및 명령어

## 1. 서버를 구축할 때 알아야 할 필수 개념과 명령어

### 1) 리눅스 운영시 필수 개념

* 사용자 권한 구분

```shell
~]# root 사용자
~]$ 일반 사용자
```

* 시스템 종료 명령

```shell
~]# poweroff
~]# shutdown -p now
~]# halt -p
~]# init 0
```

* 시스템 재부팅

```shell
~]# shutdown -r now
~]# reboot
~]# init6
```

* 로그 아웃

```shell
~]# exit
~]# logout
```

* 가상 콘솔 : CentOS는6개의 가상 콘솔(가상의 모니터)를 제공한다

```shell
ctrl+alt+f1~f6
```

* 런레벨 : `init` 명령어 뒤에 붙는 숫자

```
1. 런레벨 확인 방법
	1) ~]# cd /lib/systemd/system
	2) ~]# ls -l runlevel?.target
2. 런레벨 정보
lrwxrwxrwx. 1 root root 15 runlevel0.target -> poweroff.target 종료모드
lrwxrwxrwx. 1 root root 13 runlevel1.target -> rescue.target 시스템 복구 모드
lrwxrwxrwx. 1 root root 17 runlevel2.target -> multi-user.target 사용하지 않음
lrwxrwxrwx. 1 root root 17 runlevel3.target -> multi-user.target 텍스트 모드의 다중 사용자 모드
lrwxrwxrwx. 1 root root 17 runlevel4.target -> multi-user.target 사용하지 않음
lrwxrwxrwx. 1 root root 16 runlevel5.target -> graphical.target 그래픽 모드의 다중 사용자 모드
lrwxrwxrwx. 1 root root 13 runlevel6.target -> reboot.target 재부팅 모드
3. 런레벨 설정
	1) 현재 시스템에 설정된 런레벨 확인 :~]# ls -l /etc/systemd/system/default.target
	2) 런레벨 변경
		(1) ~]# ln -sf /lib/systemd/system/변경_런레벨 /etc/systemd/system/default.target
		(2) ~]# reboot
```

* 사용했던 명령 기록

```shell
1. 사용했던 명령 기록 확인 : ~]# history
2. 사용했던 명령 기록 삭제 : ~]# history -c
```

* vi 에디터 기본 사용법

```
1. 모드 전환
    1) i : 현재 커서의 위치부터 입력
    2) I : 현재 커서 줄의 맨 앞에서부터 입력
    3) a : 현재 커서의 위치 다음 칸부터 입력
    4) A : 현재 커서 줄의 맨 마지막부터 입력
    5) o : 현재 커서의 다음 줄에 입력
    6) O : 현재 커서의 이전 줄에 입력
    7) s : 현재 커서 위치의 한 글자를 지우고 입력
    8) S : 현재 커서의 한 줄을 지우고 입력
2. 커서 이동
	1) h : 커서를 왼쪽으로 한 칸 이동
	2) j : 커서를 아래로 한 칸 이동
	3) k : 커서를 위로 한 칸 이동
	4) l : 커서를 오른쪽으로 한 칸 이동
	5) ctrl+f : 다음 화면으로 이동
	6) ctrl+b : 이전 화면으로 이동
	7) ^ : 현재 행의 처음으로 이동
	8) $ : 현재 행의 마지막으로 이동
	9) gg : 제일 첫 행으로 이동
	10) G : 제일 끝 행으로 이동
	11) 숫자 + G : 해당 숫자의 행으로 이동
	12) :+숫자+enter :해당 숫자의 행으로 이동
3. 삭제,복사,붙여넣기 등
	1) x : 현재 커서가 위치한 글자 삭제
	2) X : 현재 커서가 위치한 앞 글자 삭제
	3) dd : 현재 커서의 행 삭제
	4) 숫자 + dd : 현재 커서부터 숫자만큼의 행 삭제
	5) yy : 현재 커서가 있는 행을 복사
	6) 숫자 + yy : 현재 커서부터 숫자만큼의 행을 복사
	7) p : 복사한 내용을 현재 행 이후에 붙여 넣기
	8) P : 복사한 내용을 현재 행 이전에 붙여 넣기
4. 문자열 찾기
	1) /+문자열+enter : 현재 커서 이후의 해당 문자열을 찾음
	2) n : 찾은 문자 중에서 다음 문자로 이동
5. 행 번호 표시 : :+set number+enter
6. 문자열 치환 : :+%s/기존문자열/변경할문자열
```

* 도움말 사용법

```shell
~]# man 섹션 명령어
1) 섹션 : 1-9까지 9개 페이지로 나뉜다. 섹션 번호를 지정하지 않으면 1번부터 9번까지 섹션을 차례로 검색해 가장 먼저 나오는 도움말을 출력해준다
2) 섹션 종류
	(1) 1 : 명령어
	(2) 2 : 프로그래밍
	(3) 3 : 프로그래밍
	(4) 4 : 디바이스
	(5) 5 : 파일 형식
	(6) 6 : 게임
	(7) 7 : 기타 주제
	(8) 8 : 시스템 관리
	(9) 9 : 커널 관련 설명
```

* 마운트(mount) : 물리적인 장치를 특정한 위치에 연결시켜 주는 과정

```shell
1. 마운트 확인 : ~]# mount
2. 마운트 해제 : ~]# umount 대상
```

* ISO 파일 생성

```shell
1. genisoimage 패키지 설치 확인 : ~]# rpm -qa genisoimage
2. iso 파일 생성 
	1) 명령어 : ~]# genisoimage -r -J -o 생성될ISO파일이름 포함될파일또는디렉터리
	2) 옵션
		(1) -r -J : 8글자 이상의 파일 이름 및 대소문자를 구분해서 인식
		(2) -o : 출력할 파일을 위한 옵션
```

### 2) 리눅스 기본 명령어

#### (1) ls : 해당 리텍터리(폴더)에 있는 파일의 목록을 나타낸다

```
1. 의미 : list의 약자. 해당 리텍터리(폴더)에 있는 파일의 목록을 나타낸다
2. 용법 : ls 옵션 디렉터리 or 확장자
3. 옵션
	1) -a, --all : 경로안의 모든 파일을 나열한다. '.'으로 시작하는 파일 들도 포함한다
	2) -b, --escape : 알파벳 형식을 사용하는 파일 이름안에서 그래픽 문자가 아닌 문자들을 사용한다	
	3) -c, --time=ctime, --time=status : 파일 최근 변경 시간에 따라 정열해서 보여준다. -l옵션과 함께 사용하면 해당 파일의 최근 변경 시간을 보여준다
	4) -d, --directory : 경로안의 내용을 나열하지 않고 해당 경로를 보여준다
	5) -f : 경로 내용을 정열하지 않는고 디스크 저장순으로 보여준다
	6) --full-time : 시간을 간략히 표시하지 않고 모두 보여준다
	7) -g : 무시, 유닉스 호환을 위해 존재
	8) -i, --inode : 파일 왼쪽에 색인 번호를 보여준다
	9) -k, --kilobytes : 파일 크기가 나열되면 kb 단위로 보여준다
	10) -l, --format=long, --format=verbose : 파일 나열에 있어 파일 형태, 사용 권한, 하드링크 번호, owner 이름, group 이름, 파일 크기, 크기를 자세하게 나열한다
	11) -m, --format=commas : 파일을 가로로 나열한다
	12) -n, --numeric-uid-gid : 이름의 나열에서 UID,GID 번호를 사용한다
	13) -p : 파일 형태를 지시하는 문자를 각 파일에 추가한다
	14) -q, --hide-control-chars : 파일 이름에 그래픽 문자가 아닌 것이 있으면, '?'로 표시한다
	15) -r, --reverse : 정열 순서를 내림차순으로 한다
	16) -s, --size : 파일 크기를 1Kb 단위로 나타낸다
	17) -t, --sort=time : 파일을 최근 시간 순으로 정열한다
	18) -u, --tima=atime, --time=access, --time=use : 파일 사용 시간 순으로 정열한다
	19) -x, --format=across, --format=horizontal : 정열 방식을 가로로 한다
	20) -A, --almost-all : '.','..' 경로를 제외하고 디렉토리 안의 모든 파일을 나열한다
	21) -B, --ignore-backups : 파일 끝이 '~'인 파일은 목록 나열에 제외한다
	22) -C, --format=vertical : 정열 방식을 세로로 한다
	23) -F, --classify : 파일 형식을 알리는 문자를 각 파일 뒤에 추가한다
		(1) * : 일반적인 실행파일
		(2) / : 경로
		(3) @ : 심볼릭 링크
		(4) | : FIFO
		(5) = : 소켓
		(6)   : 일반적인 파일
	24) -G, --no-group : 자세한 목록 나열에서 group 정보를 제외한다
	25) -L, --dereference : 심볼릭 링크 파일들을 그냥 파일로 보여준다
	26) -N, --literal : 이름이 영문이 아닌 경우, c에서 사용하는 '\'와 함께 사용하는 표기 대신 그대로 출력한다
    27) -Q, --quote-name : -N 옵션과 반대
	28) -R, --recursive : 하위 경로와 그 안에 있는 모든 파일들도 나열한다
	29) -S, --sort=size : 파일 크기가 가장 큰 것부터 정열해서 나열
	30) -U, --sort=noe : 정열을 하지 않고 디스크에 저장된 순서대로 보여준다
	31) -X, --sort=extension : 파일 확장자 순으로 정열한다.
	32) -1, --format=single-comlumn : 한 줄에 한 파일씩 나열
	33) -w, --width cols : 가로 길이를 값으로 지정한다. 기본적으로 한 가면의 가로 값이 된다. 초기값은 80이다
	34) -T, --tabsize cols : 탭이 사용될 때, cols 값으로 지정된다. 초기값는 8이다
	35) -I, --ignore pattern : 패턴으로 지정된 파일들은 목록에서 제외된다.
	36) --color, --colour, --color=yes, --colour=yes : 파일의 형태에 따라 그 파일의 색깔을 다르게 보여주는 기능
	37) --color=tty, --colour=tty : --color 옵션과 같으나 단지 표준 출력에서만 색깔을 사용한다
	38) --color=no, --colour=no : 색깔을 사용하지 않는다. 해당 값이 초기값이다
	39) --help : 도움알을 보여주고 마친다
	40) --version : 버전 정보를 보여주고 마친다
```

#### (2) cd : 디렉터리를 이동하는 명령

```
1. 의미 : change directory, 디렉터리를 이동하는 명령
2. 용볍 : cd [-L|[-P[-e]]] [dir]
3. 옵션
	1) . : 현재 디렉터리
	2) .. : 상위 디렉터리
```

#### (3) pwd : 현재/작업 디렉토리명을 출력

```
1. 의미 : 현재/작업 디렉토리명을 출력
2. 옵션 
	1) --help : 표준출력으로 사용법을 출력하고 정상적으로 종료한다
	2) --version : 표준출력으로 버전정보를 출력하고 정상적으로 종료한다
```

#### (4) rm : 파일이나 디렉터리를 삭제한다

```
1. 의미 : ReMove의 약자. 파일이나 디렉터리를 삭제한다
2) 용법 : rm 옵션 이름
3) 옵션
	1) -d, --directory : 'rmdir' 명령 대신에 'unlink'와 함께 경로를 지운다. 따라서 해당 파일들의 종속성문제가 생길 수 있으므로 옵션을 사용한 후에는 fsck(8)로 파일 시스템을 검사해야한다. 해당 옵션은 시스템 관리자만 사용할 수 있다.
	2) -f, --force : 지울 파일이 없을 경우에는 아무런 메시지를 보여주지 않고 넘어간다
	3) -i, --interactive : 각 파일을 하나씩 지울 것인지 사용자에게 일일이 물어본다
	4) -r, -R, --recursive : 일반 파일이면 그냥 지우고 경로면 하위 경로와 파일을 모두 지운다
	5) -v, --verbose : 각각의 파일을 지우는 정보를 자세하게 모두 보여준다
	6) --help : 도움말을 보여주고 마친다
	7) --version : 버전 정보를 보여주고 마친다
```

#### (5) cp : 파일이나 디렉터리를 복사한다

```
1. 의미 : copy, 파일이나 디렉터리를 복사한다.
2. 용법 : cp 옵션 소스 디렉터리
3. 옵션
	1) -a, -archive : 원본 파일의 속성, 링크 정보들을 그대로 유지하면서 복사한다
    2) -b, --backup : 복사할 대상이 이미 있어 복사 대상을 덮어쓰거나 지울 경우를 대비해 백업본을 만든다
    3) -d, -no-dereference : 만약 복사할 원본이 심볼릭 파일이면, cp 명령은 그 심볼릭 대상이 되는 파일을 복사한다. 그러나 해당 명령을 사용하면 심볼릭 파일 자체를 심볼릭 정보와 함께 복사한다
    4) -f, --force : 만약 복사 대상 파일이 이미 있으면 강제로 지우고 복사한다
    5) -i, --interactive : 만약 복사 대상 파일이 이미 있으면 사용자에게 어떻게 처리할 것인지 물어보는 프롬프트를 나타나게 한다
    6) -p, --parents : 원본 파일에 지정을 경로와 같이 했을 경우, 그 경로 그대로 복사된다
    7) -r : 일반 파일이면 그냥 복사되고 만약 원본이 경로면 그 경로와 함께 경로 안에 있는 모든 하위경로 파일들이 복사된다
    8) -s, --symbolic-link : 경로가 아닌 일반 파일을 심볼릭 링크 형식으로 복사한다. 이 경우 복사할 원본 파일 이름은 절대경로로 지정된 파일이름이어야 한다
    9) -u, --update : 복사할 대상이 이미 있는데 이 파일의 변경 날짜가 같거나 더 최근의 것이면 복사하지 않는다
    10) -v, --verbose : 각 파일의 복사 상태를 자세히 보여준다
    11) -x, --one-file-system : 원본과 대상 파일의 파일 시스템이 다를 경우에는 복사하지 않는다
    12) -R, --recursive : 경로를 복사할 경우에는 그 안에 포함된 모든 하위경로와 파일들을 모두 복사한다
    13) -S, --suffix backup-suffix : 만약에 복사 대상이 이미 있어, 백업을 해야할 경우에 그 백업 파일에서 사용할 파일 이름의 꼬리 문자를 지정한다
    14) -V, --version-control{numbered,existing,simple} : 백업하는 방법을 지정하는데, 이 옵션은 이미 지정되어 있는 VERSION_CONTROL 환경 변수를 무시한다.
    	(1) numbered or t : 항상 번호 있는 백업본을 만든다
    	(2) existing or nil : 대상 파일이 이미 있을 경우에만 백업본을 만든다
    	(3) simple or never : 간단한 백업을 만든다
    15) --help : 도움말을 보여주고 마친다
    16) --version : 버전 정보를 보여주고 마친다
```

#### (6) touch : 새 파일을 생성하거나 이미 파일이 존재하면 파일의 최종 수정 시간을 변경한다

```
1. 의미 : 새 파일을 생성하거나 이미 파일이 존재하면 파일의 최종 수정 시간을 변경한다
2. 용법 : touch [-acfm] [-r file] [-t MMDDHHMM[[CC]YY][.SS]] [-d time] [--time={atime,access,use,mtime,modify}] [--date=time] [--rreference=file] [--no-create] [--help] [--version] file
3. 옵션
	1) -a, --time=atime, --time=access, --time=use : 최근 파일 사용 시간만 바꾼다
	2) -c, --no-create : 파일이 이미 존재하지 않는다면 새로 만들지 않는다
	3) -d, --date time : 현재 시간 대신 지정한 time 값을 사용한다
	4) -f : BSD버전과 호환을 위해 있을뿐 의미 없는 옵션
	5) -m, --time=mtime, --time=modify : 최근 변경 시간만 바꾼다
	6) -r, --reference file : 현재 시간 대신 지정한 file의 시간으로 바꾼다
	7) -t, MMDDhhmm[[CC]YY][.SS] : 현재 시간 대신 지정한 시간으로 바꾼다
		(1) MM : 달
		(2) DD : 일
		(3) hh : 시각
		(4) mm : 분
		(5) [CC]YY : 연도
		(6) SS : 초
	8) --help : 도움말 정보를 보여주고 마친다
	9) --version : 버전 정보를 보여주고 마친다
```

#### (7) mv : 파일이나 디렉터리의 이름을 변경하거나 다른 디렉터리로 옮긴다

```
1. 의미 : MoVe, 파일이나 디렉터리의 이름을 변경하거나 다른 디렉터리로 옮긴다
2. 용법 : mv 옵션 소스 디렉터리
3. 옵션
	1) -b, --backup : 대상 파일이 이미 있어 지워지는 것을 대비해 백업 파일을 만든다
	2) -f, --force : 만약 복사 대상 파일이 이미 있으면 강제로 지우고 복사한다
    3) -i, --interactive : 만약 복사 대상 파일이 이미 있으면 사용자에게 어떻게 처리할 것인지 물어보는 프롬프트를 나타나게 한다
    4) -u, --update : 복사할 대상이 이미 있는데 이 파일의 변경 날짜가 같거나 더 최근의 것이면 파일을 옮기지 않는다
    5) -v, --verbose : 파일을 옮기는 과정을 자세하게 보여준다
    6) --help : 도움말 정보를 보여주고 마친다
	7) --version : 버전 정보를 보여주고 마친다
```

#### (8) mkdir : 새로운 디렉터리를 생성한다

```
1. 의미 : MaKe DIRectory, 새로운 디렉터리를 생성한다. 생성된 디렉터린는 명령을 실행한 사용자의 소유가 된다
2. 용법 : mkdir [-p] [-m mode] [--parents] [--mode=mode] [--help] [--version] 디렉터리
3. 옵션
	1) -m, --mode : mode로 사용할 것은 chmod(1)에서 사용하는 기호 형식이나 숫자형식이다. 해당 값은 초깃값으로 지정되는 모드를 무시한다
	2) -p, --parents : 필요한 경우에 상위 경로까지 만든다. 상위경로의 모드값은 'u+wx'이다
    3) --help : 도움말 정보를 보여주고 마친다
	4) --version : 버전 정보를 보여주고 마친다
```

#### (9) cat : 파일의 내용을 화면에 보여준다

```
1. 의미 : conCATenate, 파일을 내용을 화면에 보여준다. 여러 개 파일을 나열하며 파일을 연결해 보여준다
2. 용법 : cat 옵션 파일
3. 옵션
	1) -A, --show-all : -vET와 같은 옵션
	2) -b, --number-nonblack : 비어있지 않은 결과 라인. -n을 대체한다
	3) -e : -vE와 같은 옵션
	4) -E, --show-ends : 각 라인의 끝마다 '$'을 붙여 표시한다
	5) -n, --number : 결과 라인 모두에 번호를 붙여 표현한다
	6) -s, --squeeze-blank : 빈 출력 라인의 반복을 제한한다
	7) -t : -vT와 같은 옵션
	8) -T, --show-tabs : 탭 입력을 '^I'로 표현해 표시해준다
	9) -u : 무시
	10) -V, --show-nonprinting : LFD와 TAB을 제외하고 '^'와 'M-'표시를 사용한다
    11) --help : 도움말 정보를 보여주고 마친다
	12) --version : 버전 정보를 보여주고 마친다
```

#### (10) head : 텍스트 형식으로 작성된 파일의 앞 10행을 화면에 출력한다

```
1. 의미 : 텍스트 형식으로 작성된 파일의 앞 10행을 화면에 출력한다
2. 용법 : head 옵션 파일
3. 옵션
	1) -c, --bytes : 각 파일의 첫 K bytes 만큼을 출력한다
	2) -n, --lines : 각 파일의 앞 10행 대신 K 라인 수만큼 출력한다
	3) -q, --quiet, --silent : 파일 이름을 제공하는 헤더를 출력하지 않는다
	4) -v, --verbose : 파일 이름을 제공하는 헤드를 항상 출력한다
	5) --help : 도움말 정보를 보여주고 마친다
	6) --version : 버전 정보를 보여주고 마친다
```

#### (11) tail : 텍스트 형식으로 작성된 파일의 뒷 10행을 화면에 출력한다

```
1. 의미 : 텍스트 형식으로 작성된 파일의 뒷 10행을 화면에 출력한다
2. 용법 : tail 옵션 파일
3. 옵션
	1) -c, --bytes :각 파일의 뒷 k bytes 만큼을 출력한다
	2) -n, --lines : 각 파일의 뒷 10행 대신 k 라인 수만큼 출력한다
	3) -q, --quiet, --silent : 파일 이름을 제공하는 헤더를 출력하지 않는다
	4) -v, --verbose : 파일 이름을 제공하는 헤드를 항상 출력한다
	5) --help : 도움말 정보를 보여주고 마친다
	6) --version : 버전 정보를 보여주고 마친다
```

#### (12) more : 텍스트 형식으로 작성된 파일을 페이지 단위로 화면에 출력한다

```
1. 의미 : 텍스트 형식으로 작성된 파일을 페이지 단위로 화면에 출력한다
2. 용법 : more [-dlfpcsu] [-num] [+/표현식] [+줄번호] 파일
3. 옵션
	1) -num : num 줄을 한 화면으로 지정한다
	2) -d : 글쇠를 입력받아야 할때 '[Press space to continue, 'q'to quit.]' 내용을 보여주고 글쇠를 잘못 입력되었을 때 '[Press 'h' for instructions]' 내용을 보여준다
	3) -l : ^L을 특수 취급하는 행동을 방지한다
	4) -f : 
	5) -p : 스크롤하지 않고 화면을 모두 지운 후 텍스트를 보여준다
	6) -c : 스크롤 하지 않는다. 대신 각 화면을 위에서 부터 표현한 후 한줄씩 지우는 방식으로 표현한다
	7) -s : 여러 줄의 빈 줄을 한 줄로 보여준다
	8) -u : 밑줄 속성을 가진 문자를 그냥 보여준다
```

#### (13) less :  more 명령어와 용도가 비슷하지만 기능이 더 확장

```
1. 의미 : more 명령어와 용도가 비슷하지만 기능이 더 확장되어 있다. more에서 사용하는 키도 사용할 수 있으며 화살표 키나 pageup, pagedown 키도 사용가능하다
```

#### (14) file : 해당 파일이 어떤 종류의 파일인지 표시해준다

```
1. 의미 : 해당 파일이 어떤 종류의 파일인지 표시해준다
```

#### (15) clear : 현재 사용 중인 터미널 화면을 깨끗하게 지워준다

```
1. 의미 : 현재 사용 중인 터미널 화면을 깨끗하게 지워준다
```

### 2) 리눅스 명령어

* RPM

```
1. RPM(Redhat Package Management) : 프로그램을 설치한 후 바로 실행할 수 있는 설치 파일인 패키지를 관리해준다
2. RPM 형식 : 패키지이름-버전-릴리스번호.CentOS버전.아키텍처.rpm
	1) 패키지이름 : 프로그램 이름
	2) 버전 : 주_버전.부_버전.패치_버전
	3) 릴리스번호 : 문제점을 개선할 때마다 붙여지는 번호
    4) 
	
```

